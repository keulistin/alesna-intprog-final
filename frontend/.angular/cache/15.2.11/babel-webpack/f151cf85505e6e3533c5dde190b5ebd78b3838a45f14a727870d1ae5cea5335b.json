{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { first } from 'rxjs/operators';\nlet AddEditDepartmentComponent = class AddEditDepartmentComponent {\n  constructor(route, router, accountService, alertService) {\n    this.route = route;\n    this.router = router;\n    this.accountService = accountService;\n    this.alertService = alertService;\n    this.department = {\n      name: '',\n      description: ''\n    };\n    this.errorMessage = '';\n    this.loading = false;\n    this.submitted = false;\n  }\n  ngOnInit() {\n    this.id = this.route.snapshot.params['id'];\n    this.isAddMode = !this.id;\n    if (!this.isAddMode) {\n      this.loading = true;\n      this.accountService.getDepartmentById(this.id).pipe(first()).subscribe({\n        next: department => {\n          this.department = department;\n          this.loading = false;\n        },\n        error: error => {\n          this.errorMessage = error;\n          this.loading = false;\n        }\n      });\n    }\n  }\n  save() {\n    this.submitted = true;\n    this.alertService.clear();\n    if (this.loading) {\n      return;\n    }\n    this.loading = true;\n    if (this.isAddMode) {\n      this.createDepartment();\n    } else {\n      this.updateDepartment();\n    }\n  }\n  createDepartment() {\n    this.accountService.createDepartment(this.department).pipe(first()).subscribe({\n      next: () => {\n        this.alertService.success('Department created successfully', {\n          keepAfterRouteChange: true\n        });\n        this.router.navigate(['../'], {\n          relativeTo: this.route\n        });\n      },\n      error: error => {\n        this.errorMessage = error;\n        this.loading = false;\n      }\n    });\n  }\n  updateDepartment() {\n    this.accountService.updateDepartment(this.id, this.department).pipe(first()).subscribe({\n      next: () => {\n        this.alertService.success('Department updated successfully', {\n          keepAfterRouteChange: true\n        });\n        this.router.navigate(['../../'], {\n          relativeTo: this.route\n        });\n      },\n      error: error => {\n        this.errorMessage = error;\n        this.loading = false;\n      }\n    });\n  }\n  cancel() {\n    this.router.navigate(['/departments']);\n  }\n};\nAddEditDepartmentComponent = __decorate([Component({\n  templateUrl: 'add-edit.component.html'\n})], AddEditDepartmentComponent);\nexport { AddEditDepartmentComponent };","map":{"version":3,"mappings":"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","names":["Component","first","AddEditDepartmentComponent","constructor","route","router","accountService","alertService","name","description","ngOnInit","id","snapshot","params","isAddMode","loading","getDepartmentById","pipe","subscribe","next","department","error","errorMessage","save","submitted","clear","createDepartment","updateDepartment","success","keepAfterRouteChange","navigate","relativeTo","cancel","templateUrl"],"sourceRoot":"","sources":["E:\\semifinals\\groupB-fullstack-app\\frontend\\src\\app\\departments\\add-edit.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AccountService } from '@app/_services/account.service';\r\nimport { AlertService } from '@app/_services/alert.service';\r\nimport { first } from 'rxjs/operators';\r\n\r\n@Component({ templateUrl: 'add-edit.component.html' })\r\n\r\nexport class AddEditDepartmentComponent implements OnInit {\r\n    department: any = {\r\n        name: '',\r\n        description: ''\r\n    };\r\n    id: string;\r\n    isAddMode: boolean;\r\n    errorMessage: string = '';\r\n    loading = false;\r\n    submitted = false;\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private accountService: AccountService,\r\n        private alertService: AlertService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.id = this.route.snapshot.params['id'];\r\n        this.isAddMode = !this.id;\r\n\r\n        if (!this.isAddMode) {\r\n            this.loading = true;\r\n            this.accountService.getDepartmentById(this.id)\r\n                .pipe(first())\r\n                .subscribe({\r\n                    next: (department) => {\r\n                        this.department = department;\r\n                        this.loading = false;\r\n                    },\r\n                    error: (error) => {\r\n                        this.errorMessage = error;\r\n                        this.loading = false;\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    save() {\r\n        this.submitted = true;\r\n        this.alertService.clear();\r\n\r\n        if (this.loading) {\r\n            return;\r\n        }\r\n\r\n        this.loading = true;\r\n        if (this.isAddMode) {\r\n            this.createDepartment();\r\n        } else {\r\n            this.updateDepartment();\r\n        }\r\n    }\r\n\r\n    private createDepartment() {\r\n        this.accountService.createDepartment(this.department)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.alertService.success('Department created successfully', { keepAfterRouteChange: true });\r\n                    this.router.navigate(['../'], { relativeTo: this.route });\r\n                },\r\n                error: (error) => {\r\n                    this.errorMessage = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    private updateDepartment() {\r\n        this.accountService.updateDepartment(this.id, this.department)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.alertService.success('Department updated successfully', { keepAfterRouteChange: true });\r\n                    this.router.navigate(['../../'], { relativeTo: this.route });\r\n                },\r\n                error: (error) => {\r\n                    this.errorMessage = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    cancel() {\r\n        this.router.navigate(['/departments']);\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}