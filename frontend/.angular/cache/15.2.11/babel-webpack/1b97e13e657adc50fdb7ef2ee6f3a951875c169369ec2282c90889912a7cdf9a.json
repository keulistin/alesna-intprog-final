{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@app/_services\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction TransferModalComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelement(1, \"span\", 19);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TransferModalComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.error);\n  }\n}\nfunction TransferModalComponent_option_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const dept_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", dept_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(dept_r4.name);\n  }\n}\nfunction TransferModalComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 22);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"show d-block\": a0\n  };\n};\nexport let TransferModalComponent = /*#__PURE__*/(() => {\n  class TransferModalComponent {\n    constructor(employeeService, departmentService, alertService) {\n      this.employeeService = employeeService;\n      this.departmentService = departmentService;\n      this.alertService = alertService;\n      this.transferComplete = new EventEmitter();\n      this.departments = [];\n      this.currentDepartmentName = '';\n      this.isOpen = false;\n      this.loading = false;\n      this.error = '';\n    }\n    ngOnInit() {\n      // Load departments on init\n      this.loadDepartments();\n    }\n    open(employeeId) {\n      this.employeeId = employeeId;\n      this.loading = true;\n      this.error = '';\n      this.isOpen = true;\n      // Load employee details\n      this.employeeService.getById(employeeId).pipe(first()).subscribe({\n        next: employee => {\n          this.employee = employee;\n          this.departmentId = Number(employee.departmentId);\n          // Find current department name\n          const currentDept = this.departments.find(d => d.id === Number(employee.departmentId));\n          this.currentDepartmentName = currentDept ? currentDept.name : 'Unknown';\n          this.loading = false;\n        },\n        error: error => {\n          this.error = error;\n          this.loading = false;\n        }\n      });\n    }\n    close() {\n      this.isOpen = false;\n    }\n    loadDepartments() {\n      this.departmentService.getAll().pipe(first()).subscribe({\n        next: departments => this.departments = departments,\n        error: error => this.error = error\n      });\n    }\n    transfer() {\n      if (!this.employee || !this.departmentId) {\n        this.error = 'Employee or department not selected';\n        return;\n      }\n      this.loading = true;\n      this.error = '';\n      this.employeeService.transfer(this.employee.id.toString(), this.departmentId).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('Employee transferred successfully');\n          this.transferComplete.emit();\n          this.close();\n          this.loading = false;\n        },\n        error: error => {\n          this.error = error;\n          this.loading = false;\n        }\n      });\n    }\n  }\n  TransferModalComponent.ɵfac = function TransferModalComponent_Factory(t) {\n    return new (t || TransferModalComponent)(i0.ɵɵdirectiveInject(i1.EmployeeService), i0.ɵɵdirectiveInject(i1.DepartmentService), i0.ɵɵdirectiveInject(i1.AlertService));\n  };\n  TransferModalComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TransferModalComponent,\n    selectors: [[\"app-transfer-modal\"]],\n    inputs: {\n      employeeId: \"employeeId\"\n    },\n    outputs: {\n      transferComplete: \"transferComplete\"\n    },\n    decls: 25,\n    vars: 11,\n    consts: [[\"tabindex\", \"-1\", \"role\", \"dialog\", 1, \"modal\", \"fade\", 3, \"ngClass\"], [1, \"modal-dialog\"], [1, \"modal-content\"], [1, \"modal-header\"], [1, \"modal-title\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", 3, \"click\"], [1, \"modal-body\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"readonly\", \"\", 1, \"form-control\", 3, \"value\"], [1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-warning\", 3, \"disabled\", \"click\"], [\"class\", \"modal-backdrop fade show\", 4, \"ngIf\"], [1, \"text-center\"], [1, \"spinner-border\", \"spinner-border-sm\"], [1, \"alert\", \"alert-danger\"], [3, \"ngValue\"], [1, \"modal-backdrop\", \"fade\", \"show\"]],\n    template: function TransferModalComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h5\", 4);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function TransferModalComponent_Template_button_click_6_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵtemplate(8, TransferModalComponent_div_8_Template, 2, 0, \"div\", 7);\n        i0.ɵɵtemplate(9, TransferModalComponent_div_9_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementStart(10, \"div\", 9)(11, \"label\", 10);\n        i0.ɵɵtext(12, \"Current Department\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(13, \"input\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 9)(15, \"label\", 10);\n        i0.ɵɵtext(16, \"New Department\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"select\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function TransferModalComponent_Template_select_ngModelChange_17_listener($event) {\n          return ctx.departmentId = $event;\n        });\n        i0.ɵɵtemplate(18, TransferModalComponent_option_18_Template, 2, 2, \"option\", 13);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\", 14)(20, \"button\", 15);\n        i0.ɵɵlistener(\"click\", function TransferModalComponent_Template_button_click_20_listener() {\n          return ctx.close();\n        });\n        i0.ɵɵtext(21, \"Cancel\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"button\", 16);\n        i0.ɵɵlistener(\"click\", function TransferModalComponent_Template_button_click_22_listener() {\n          return ctx.transfer();\n        });\n        i0.ɵɵtext(23, \"Transfer\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(24, TransferModalComponent_div_24_Template, 1, 0, \"div\", 17);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(9, _c0, ctx.isOpen));\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"Transfer Employee: \", ctx.employee == null ? null : ctx.employee.employeeId, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.error);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"value\", ctx.currentDepartmentName);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.departmentId);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.departments);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"disabled\", ctx.loading);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.isOpen);\n      }\n    },\n    dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgModel],\n    encapsulation: 2\n  });\n  return TransferModalComponent;\n})();","map":{"version":3,"mappings":"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","names":["EventEmitter","first","i0","TransferModalComponent","constructor","employeeService","departmentService","alertService","ngOnInit","loadDepartments","open","employeeId","loading","error","isOpen","getById","pipe","subscribe","next","employee","departmentId","Number","currentDept","departments","find","d","id","currentDepartmentName","name","close","getAll","transfer","toString","success","transferComplete","emit","selectors","inputs","outputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\xampp\\htdocs\\groupB-fullstack-app\\frontend\\src\\app\\employees\\transfer-modal.component.ts"],"sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { first } from 'rxjs/operators';\r\nimport { EmployeeService, DepartmentService, AlertService } from '@app/_services';\r\n\r\n@Component({\r\n    selector: 'app-transfer-modal',\r\n    template: `\r\n        <div class=\"modal fade\" [ngClass]=\"{ 'show d-block': isOpen }\" tabindex=\"-1\" role=\"dialog\">\r\n            <div class=\"modal-dialog\">\r\n                <div class=\"modal-content\">\r\n                    <div class=\"modal-header\">\r\n                        <h5 class=\"modal-title\">Transfer Employee: {{employee?.employeeId}}</h5>\r\n                        <button type=\"button\" class=\"btn-close\" aria-label=\"Close\" (click)=\"close()\"></button>\r\n                    </div>\r\n                    <div class=\"modal-body\">\r\n                        <div *ngIf=\"loading\" class=\"text-center\">\r\n                            <span class=\"spinner-border spinner-border-sm\"></span>\r\n                        </div>\r\n                        <div *ngIf=\"error\" class=\"alert alert-danger\">{{error}}</div>\r\n                        <div class=\"mb-3\">\r\n                            <label class=\"form-label\">Current Department</label>\r\n                            <input type=\"text\" class=\"form-control\" [value]=\"currentDepartmentName\" readonly>\r\n                        </div>\r\n                        <div class=\"mb-3\">\r\n                            <label class=\"form-label\">New Department</label>\r\n                            <select class=\"form-select\" [(ngModel)]=\"departmentId\">\r\n                                <option *ngFor=\"let dept of departments\" [ngValue]=\"dept.id\">{{dept.name}}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"modal-footer\">\r\n                        <button type=\"button\" class=\"btn btn-secondary\" (click)=\"close()\">Cancel</button>\r\n                        <button type=\"button\" class=\"btn btn-warning\" (click)=\"transfer()\" [disabled]=\"loading\">Transfer</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"modal-backdrop fade show\" *ngIf=\"isOpen\"></div>\r\n    `,\r\n    styles: []\r\n})\r\nexport class TransferModalComponent implements OnInit {\r\n    @Input() employeeId: string;\r\n    @Output() transferComplete = new EventEmitter<void>();\r\n    \r\n    employee: any;\r\n    departments: any[] = [];\r\n    departmentId: number;\r\n    currentDepartmentName: string = '';\r\n    isOpen = false;\r\n    loading = false;\r\n    error = '';\r\n\r\n    constructor(\r\n        private employeeService: EmployeeService,\r\n        private departmentService: DepartmentService,\r\n        private alertService: AlertService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        // Load departments on init\r\n        this.loadDepartments();\r\n    }\r\n\r\n    open(employeeId: string) {\r\n        this.employeeId = employeeId;\r\n        this.loading = true;\r\n        this.error = '';\r\n        this.isOpen = true;\r\n        \r\n        // Load employee details\r\n        this.employeeService.getById(employeeId)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: (employee) => {\r\n                    this.employee = employee;\r\n                    this.departmentId = Number(employee.departmentId);\r\n                    \r\n                    // Find current department name\r\n                    const currentDept = this.departments.find(d => d.id === Number(employee.departmentId));\r\n                    this.currentDepartmentName = currentDept ? currentDept.name : 'Unknown';\r\n                    \r\n                    this.loading = false;\r\n                },\r\n                error: error => {\r\n                    this.error = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    close() {\r\n        this.isOpen = false;\r\n    }\r\n\r\n    loadDepartments() {\r\n        this.departmentService.getAll()\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: departments => this.departments = departments,\r\n                error: error => this.error = error\r\n            });\r\n    }\r\n\r\n    transfer() {\r\n        if (!this.employee || !this.departmentId) {\r\n            this.error = 'Employee or department not selected';\r\n            return;\r\n        }\r\n        \r\n        this.loading = true;\r\n        this.error = '';\r\n        \r\n        this.employeeService.transfer(this.employee.id.toString(), this.departmentId)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.alertService.success('Employee transferred successfully');\r\n                    this.transferComplete.emit();\r\n                    this.close();\r\n                    this.loading = false;\r\n                },\r\n                error: error => {\r\n                    this.error = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n}"]},"metadata":{},"sourceType":"module","externalDependencies":[]}