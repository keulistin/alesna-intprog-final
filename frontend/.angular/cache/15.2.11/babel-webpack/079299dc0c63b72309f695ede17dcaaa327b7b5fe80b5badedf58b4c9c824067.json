{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@app/_services\";\nimport * as i3 from \"@angular/common\";\nfunction RequestListComponent_tr_19_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", item_r3.name, \" (x\", item_r3.quantity, \") \");\n  }\n}\nfunction RequestListComponent_tr_19_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\")(6, \"ul\", 7);\n    i0.ɵɵtemplate(7, RequestListComponent_tr_19_li_7_Template, 2, 2, \"li\", 5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\")(11, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function RequestListComponent_tr_19_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const request_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.edit(request_r1.id));\n    });\n    i0.ɵɵtext(12, \" Edit \");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const request_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r1.type);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r1.employeeId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", request_r1.requestItems);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(request_r1.status);\n  }\n}\nexport let RequestListComponent = /*#__PURE__*/(() => {\n  class RequestListComponent {\n    constructor(router, accountService) {\n      this.router = router;\n      this.accountService = accountService;\n      this.requests = [];\n      this.account = this.accountService.accountValue;\n    }\n    ngOnInit() {\n      this.loadAllRequests();\n    }\n    loadAllRequests() {\n      this.accountService.getAllRequests().pipe(first()).subscribe(requests => this.requests = requests, error => console.error('Error loading requests:', error));\n    }\n    add() {\n      this.router.navigate(['/requests/add']);\n    }\n    edit(id) {\n      this.router.navigate(['/requests/edit', id]);\n    }\n    delete(id) {\n      if (confirm('Are you sure you want to delete this request?')) {\n        this.accountService.deleteRequest(id).pipe(first()).subscribe({\n          next: () => {\n            this.requests = this.requests.filter(x => x.id !== id);\n          },\n          error: error => {\n            console.error('Error deleting request:', error);\n          }\n        });\n      }\n    }\n  }\n  RequestListComponent.ɵfac = function RequestListComponent_Factory(t) {\n    return new (t || RequestListComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AccountService));\n  };\n  RequestListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RequestListComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 22,\n    vars: 1,\n    consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"table-responsive\"], [1, \"table\", \"table-striped\"], [4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", \"float-end\", 3, \"click\"], [1, \"list-unstyled\", \"mb-0\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"me-1\", 3, \"click\"]],\n    template: function RequestListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Requests\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"table\", 4)(6, \"thead\")(7, \"tr\")(8, \"th\");\n        i0.ɵɵtext(9, \"Type\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"th\");\n        i0.ɵɵtext(11, \"Employee\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"th\");\n        i0.ɵɵtext(13, \"Items\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"th\");\n        i0.ɵɵtext(15, \"Status\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Actions\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(18, \"tbody\");\n        i0.ɵɵtemplate(19, RequestListComponent_tr_19_Template, 13, 4, \"tr\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(20, \"button\", 6);\n        i0.ɵɵlistener(\"click\", function RequestListComponent_Template_button_click_20_listener() {\n          return ctx.add();\n        });\n        i0.ɵɵtext(21, \"Add Request\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(19);\n        i0.ɵɵproperty(\"ngForOf\", ctx.requests);\n      }\n    },\n    dependencies: [i3.NgForOf],\n    encapsulation: 2\n  });\n  return RequestListComponent;\n})();","map":{"version":3,"mappings":"AAGA,SAASA,KAAK,QAAQ,gBAAgB;;;;;;;ICiBtBC,0BAA8C;IAC5CA,YACF;IAAAA,iBAAK;;;;IADHA,eACF;IADEA,uEACF;;;;;;IAPNA,0BAAqC;IAC/BA,YAAgB;IAAAA,iBAAK;IACzBA,0BAAI;IAAAA,YAAsB;IAAAA,iBAAK;IAC/BA,0BAAI;IAEAA,yEAEK;IACPA,iBAAK;IAEPA,0BAAI;IAAAA,YAAkB;IAAAA,iBAAK;IAC3BA,2BAAI;IAC0CA;MAAA;MAAA;MAAA;MAAA,OAASA,yCAAgB;IAAA,EAAC;IACpEA,uBACF;IAAAA,iBAAS;;;;IAbPA,eAAgB;IAAhBA,qCAAgB;IAChBA,eAAsB;IAAtBA,2CAAsB;IAGDA,eAAuB;IAAvBA,iDAAuB;IAK5CA,eAAkB;IAAlBA,uCAAkB;;;ADjBlC,WAAaC,oBAAoB;EAA3B,MAAOA,oBAAoB;IAI/BC,YACUC,MAAc,EACdC,cAA8B;MAD9B,WAAM,GAAND,MAAM;MACN,mBAAc,GAAdC,cAAc;MALxB,aAAQ,GAAU,EAAE;MACpB,YAAO,GAAG,IAAI,CAACA,cAAc,CAACC,YAAY;IAKtC;IAEJC,QAAQ;MACN,IAAI,CAACC,eAAe,EAAE;IACxB;IAEQA,eAAe;MACrB,IAAI,CAACH,cAAc,CAACI,cAAc,EAAE,CACjCC,IAAI,CAACV,KAAK,EAAE,CAAC,CACbW,SAAS,CACRC,QAAQ,IAAI,IAAI,CAACA,QAAQ,GAAGA,QAAQ,EACpCC,KAAK,IAAIC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC,CACzD;IACL;IAEAE,GAAG;MACD,IAAI,CAACX,MAAM,CAACY,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;IACzC;IAEAC,IAAI,CAACC,EAAU;MACb,IAAI,CAACd,MAAM,CAACY,QAAQ,CAAC,CAAC,gBAAgB,EAAEE,EAAE,CAAC,CAAC;IAC9C;IAEAC,MAAM,CAACD,EAAU;MACf,IAAIE,OAAO,CAAC,+CAA+C,CAAC,EAAE;QAC5D,IAAI,CAACf,cAAc,CAACgB,aAAa,CAACH,EAAE,CAAC,CAClCR,IAAI,CAACV,KAAK,EAAE,CAAC,CACbW,SAAS,CAAC;UACTW,IAAI,EAAE,MAAK;YACT,IAAI,CAACV,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACW,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACN,EAAE,KAAKA,EAAE,CAAC;UACxD,CAAC;UACDL,KAAK,EAAEA,KAAK,IAAG;YACbC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;UACjD;SACD,CAAC;;IAER;;;qBA3CWX,oBAAoB;EAAA;;UAApBA,oBAAoB;IAAAuB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCRjC5B,8BAAkB;QACSA,wBAAQ;QAAAA,iBAAM;QACvCA,8BAAuB;QAKTA,oBAAI;QAAAA,iBAAK;QACbA,2BAAI;QAAAA,yBAAQ;QAAAA,iBAAK;QACjBA,2BAAI;QAAAA,sBAAK;QAAAA,iBAAK;QACdA,2BAAI;QAAAA,uBAAM;QAAAA,iBAAK;QACfA,2BAAI;QAAAA,wBAAO;QAAAA,iBAAK;QAGpBA,8BAAO;QACLA,sEAgBK;QACPA,iBAAQ;QAGZA,kCAA0D;QAAhBA;UAAA,OAAS6B,SAAK;QAAA,EAAC;QAAC7B,4BAAW;QAAAA,iBAAS;;;QApBhDA,gBAAW;QAAXA,sCAAW;;;;;;SDPhCC,oBAAoB;AAAA","names":["first","i0","RequestListComponent","constructor","router","accountService","accountValue","ngOnInit","loadAllRequests","getAllRequests","pipe","subscribe","requests","error","console","add","navigate","edit","id","delete","confirm","deleteRequest","next","filter","x","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\semifinals\\groupB-fullstack-app\\frontend\\src\\app\\requests\\list.component.ts","E:\\semifinals\\groupB-fullstack-app\\frontend\\src\\app\\requests\\list.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { AccountService } from '@app/_services';\r\nimport { first } from 'rxjs/operators';\r\n\r\n@Component({\r\n  templateUrl: '/list.component.html'\r\n})\r\nexport class RequestListComponent implements OnInit {\r\n  requests: any[] = [];\r\n  account = this.accountService.accountValue;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private accountService: AccountService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loadAllRequests();\r\n  }\r\n\r\n  private loadAllRequests() {\r\n    this.accountService.getAllRequests()\r\n      .pipe(first())\r\n      .subscribe(\r\n        requests => this.requests = requests,\r\n        error => console.error('Error loading requests:', error)\r\n      );\r\n  }\r\n\r\n  add() {\r\n    this.router.navigate(['/requests/add']);\r\n  }\r\n\r\n  edit(id: string) {\r\n    this.router.navigate(['/requests/edit', id]);\r\n  }\r\n\r\n  delete(id: string) {\r\n    if (confirm('Are you sure you want to delete this request?')) {\r\n      this.accountService.deleteRequest(id)\r\n        .pipe(first())\r\n        .subscribe({\r\n          next: () => {\r\n            this.requests = this.requests.filter(x => x.id !== id);\r\n          },\r\n          error: error => {\r\n            console.error('Error deleting request:', error);\r\n          }\r\n        });\r\n    }\r\n  }\r\n}","<div class=\"card\">\r\n  <div class=\"card-header\">Requests</div>\r\n  <div class=\"card-body\">\r\n    <div class=\"table-responsive\">\r\n      <table class=\"table table-striped\">\r\n        <thead>\r\n          <tr>\r\n            <th>Type</th>\r\n            <th>Employee</th>\r\n            <th>Items</th>\r\n            <th>Status</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let request of requests\">\r\n            <td>{{request.type}}</td>\r\n            <td>{{request.employeeId}}</td>\r\n            <td>\r\n              <ul class=\"list-unstyled mb-0\">\r\n                <li *ngFor=\"let item of request.requestItems\">\r\n                  {{item.name}} (x{{item.quantity}})\r\n                </li>\r\n              </ul>\r\n            </td>\r\n            <td>{{request.status}}</td>\r\n            <td>\r\n              <button class=\"btn btn-sm btn-primary me-1\" (click)=\"edit(request.id)\">\r\n                Edit\r\n              </button>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n    <button class=\"btn btn-primary float-end\" (click)=\"add()\">Add Request</button>\r\n  </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}