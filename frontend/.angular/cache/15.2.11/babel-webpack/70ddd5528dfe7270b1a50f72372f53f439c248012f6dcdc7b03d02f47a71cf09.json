{"ast":null,"code":"import { first } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@app/_services/account.service\";\nimport * as i3 from \"@app/_services/alert.service\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/common\";\nfunction AddEditDepartmentComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.errorMessage);\n  }\n}\nexport let AddEditDepartmentComponent = /*#__PURE__*/(() => {\n  class AddEditDepartmentComponent {\n    constructor(route, router, accountService, alertService) {\n      this.route = route;\n      this.router = router;\n      this.accountService = accountService;\n      this.alertService = alertService;\n      this.department = {\n        name: '',\n        description: ''\n      };\n      this.errorMessage = '';\n      this.loading = false;\n      this.submitted = false;\n    }\n    ngOnInit() {\n      this.id = this.route.snapshot.params['id'];\n      this.isAddMode = !this.id;\n      if (!this.isAddMode) {\n        this.loading = true;\n        this.accountService.getDepartmentById(this.id).pipe(first()).subscribe({\n          next: department => {\n            this.department = department;\n            this.loading = false;\n          },\n          error: error => {\n            this.errorMessage = error;\n            this.loading = false;\n          }\n        });\n      }\n    }\n    save() {\n      this.submitted = true;\n      this.alertService.clear();\n      if (this.loading) {\n        return;\n      }\n      this.loading = true;\n      if (this.isAddMode) {\n        this.createDepartment();\n      } else {\n        this.updateDepartment();\n      }\n    }\n    createDepartment() {\n      this.accountService.createDepartment(this.department).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('Department created successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.errorMessage = error;\n          this.loading = false;\n        }\n      });\n    }\n    updateDepartment() {\n      this.accountService.updateDepartment(this.id, this.department).pipe(first()).subscribe({\n        next: () => {\n          this.alertService.success('Department updated successfully', {\n            keepAfterRouteChange: true\n          });\n          this.router.navigate(['../../'], {\n            relativeTo: this.route\n          });\n        },\n        error: error => {\n          this.errorMessage = error;\n          this.loading = false;\n        }\n      });\n    }\n    cancel() {\n      this.router.navigate(['/departments']);\n    }\n  }\n  AddEditDepartmentComponent.ɵfac = function AddEditDepartmentComponent_Factory(t) {\n    return new (t || AddEditDepartmentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.AlertService));\n  };\n  AddEditDepartmentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddEditDepartmentComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 18,\n    vars: 4,\n    consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"text-center\"], [1, \"btn\", \"btn-primary\", \"me-2\", 3, \"click\"], [1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"alert\", \"alert-danger\"]],\n    template: function AddEditDepartmentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵtemplate(4, AddEditDepartmentComponent_div_4_Template, 2, 1, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"label\", 5);\n        i0.ɵɵtext(7, \"Name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function AddEditDepartmentComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.department.name = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\", 5);\n        i0.ɵɵtext(11, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function AddEditDepartmentComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.department.description = $event;\n        });\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(13, \"div\", 7)(14, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function AddEditDepartmentComponent_Template_button_click_14_listener() {\n          return ctx.save();\n        });\n        i0.ɵɵtext(15, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 9);\n        i0.ɵɵlistener(\"click\", function AddEditDepartmentComponent_Template_button_click_16_listener() {\n          return ctx.cancel();\n        });\n        i0.ɵɵtext(17, \"Cancel\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.id ? \"Edit\" : \"Add\", \" Department\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.department.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.department.description);\n      }\n    },\n    dependencies: [i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.NgIf],\n    encapsulation: 2\n  });\n  return AddEditDepartmentComponent;\n})();","map":{"version":3,"mappings":"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","names":["first","i0","AddEditDepartmentComponent","constructor","route","router","accountService","alertService","name","description","ngOnInit","id","snapshot","params","isAddMode","loading","getDepartmentById","pipe","subscribe","next","department","error","errorMessage","save","submitted","clear","createDepartment","updateDepartment","success","keepAfterRouteChange","navigate","relativeTo","cancel","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["E:\\semifinals\\groupB-fullstack-app\\frontend\\src\\app\\departments\\add-edit.component.ts","E:\\semifinals\\groupB-fullstack-app\\frontend\\src\\app\\departments\\add-edit.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { Router, ActivatedRoute } from '@angular/router';\r\nimport { AccountService } from '@app/_services/account.service';\r\nimport { AlertService } from '@app/_services/alert.service';\r\nimport { first } from 'rxjs/operators';\r\n\r\n@Component({ templateUrl: 'add-edit.component.html' })\r\n\r\nexport class AddEditDepartmentComponent implements OnInit {\r\n    department: any = {\r\n        name: '',\r\n        description: ''\r\n    };\r\n    id: string;\r\n    isAddMode: boolean;\r\n    errorMessage: string = '';\r\n    loading = false;\r\n    submitted = false;\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private router: Router,\r\n        private accountService: AccountService,\r\n        private alertService: AlertService\r\n    ) { }\r\n\r\n    ngOnInit() {\r\n        this.id = this.route.snapshot.params['id'];\r\n        this.isAddMode = !this.id;\r\n\r\n        if (!this.isAddMode) {\r\n            this.loading = true;\r\n            this.accountService.getDepartmentById(this.id)\r\n                .pipe(first())\r\n                .subscribe({\r\n                    next: (department) => {\r\n                        this.department = department;\r\n                        this.loading = false;\r\n                    },\r\n                    error: (error) => {\r\n                        this.errorMessage = error;\r\n                        this.loading = false;\r\n                    }\r\n                });\r\n        }\r\n    }\r\n\r\n    save() {\r\n        this.submitted = true;\r\n        this.alertService.clear();\r\n\r\n        if (this.loading) {\r\n            return;\r\n        }\r\n\r\n        this.loading = true;\r\n        if (this.isAddMode) {\r\n            this.createDepartment();\r\n        } else {\r\n            this.updateDepartment();\r\n        }\r\n    }\r\n\r\n    private createDepartment() {\r\n        this.accountService.createDepartment(this.department)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.alertService.success('Department created successfully', { keepAfterRouteChange: true });\r\n                    this.router.navigate(['../'], { relativeTo: this.route });\r\n                },\r\n                error: (error) => {\r\n                    this.errorMessage = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    private updateDepartment() {\r\n        this.accountService.updateDepartment(this.id, this.department)\r\n            .pipe(first())\r\n            .subscribe({\r\n                next: () => {\r\n                    this.alertService.success('Department updated successfully', { keepAfterRouteChange: true });\r\n                    this.router.navigate(['../../'], { relativeTo: this.route });\r\n                },\r\n                error: (error) => {\r\n                    this.errorMessage = error;\r\n                    this.loading = false;\r\n                }\r\n            });\r\n    }\r\n\r\n    cancel() {\r\n        this.router.navigate(['/departments']);\r\n    }\r\n}","<div class=\"card\">\r\n    <div class=\"card-header\">{{id ? 'Edit' : 'Add'}} Department</div>\r\n    <div class=\"card-body\">\r\n        <div class=\"alert alert-danger\" *ngIf=\"errorMessage\">{{errorMessage}}</div>\r\n        \r\n        <div class=\"mb-3\">\r\n            <label class=\"form-label\">Name</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"department.name\">\r\n        </div>\r\n        \r\n        <div class=\"mb-3\">\r\n            <label class=\"form-label\">Description</label>\r\n            <input type=\"text\" class=\"form-control\" [(ngModel)]=\"department.description\">\r\n        </div>\r\n        \r\n        <div class=\"text-center\">\r\n            <button class=\"btn btn-primary me-2\" (click)=\"save()\">Save</button>\r\n            <button class=\"btn btn-secondary\" (click)=\"cancel()\">Cancel</button>\r\n        </div>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}